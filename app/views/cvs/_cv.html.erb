<div class="card">
  <div class="avatar">
    <% if cv.avatar.present? %>
      <div
        style="background-image: url(<%= rails_blob_url(cv.avatar) %>)"
        class="avatar__image"
      >
      <%= link_to '', destroy_avatar_cv_path(@cv), class: 'avatar__delete icon icon--delete',
          data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' } %>
      </div>
    <% else %>
      <div class="avatar__image avatar__image--default">
        <%= simple_form_for cv, html: { class: "avatar__form" } do |form| %>
          <span class="input input--file">
            <label class="input__label">
              Загрузить изображение
            </label>
            <%= form.file_field :avatar,
              class: 'input__field',
              onchange: "this.form.submit()"
            %>
          </span>
        <% end %>
      </div>
    <% end %>
  </div>
  <div class="card__info">
  <%= simple_form_for cv, data: { controller: 'toggle-visible' } do |form| %>
    <div class="js-toggle-visible">
      <%= cv.surname&.capitalize %>
      <%= cv.name&.capitalize %>
      <%= cv.patronymic&.capitalize %>
      <span class="icon icon--edit" data-action="click->toggle-visible#onShowContent"></span>
    </div>
    <div class="js-toggle-visible-content js-hidden">
      <div class="form form__group form__group--inline ">
        <%= form.input :surname, label: false, :input_html => {:class => 'input input__field--with-background'}%>
        <%= form.input :name, label: false, :input_html => {:class => 'input input__field--with-background'} %>
        <%= form.input :patronymic, label: false, :input_html => {:class => 'input input__field--with-background'} %>
      </div>

      <button data-action="click->toggle-visible#onHideContent" type="button" class="btn btn--primary">Close</button>
      <%= form.button :submit, 'Save', class: 'btn btn--primary' %>
    </div>
  <% end %>
  </div>
  <div class="card__actions card__actions--right-between">
    <%= link_to 'Delete Cv', cv_path(cv), class: 'btn btn--danger',
      data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' } %>
  </div>
</div>